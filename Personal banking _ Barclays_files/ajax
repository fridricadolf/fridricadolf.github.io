var mboxCurrent = mboxFactories.get('default').get('Global_Mbox',0);mboxCurrent.setOffer(new mboxOfferAjax(''));mboxCurrent.getOffer().setOnLoad(function() {;_mboxDefaultContentOffer = function() {
  this._onLoad = function() {};
};

_mboxDefaultContentOffer.prototype.setOnLoad = function(_onLoad) {
  this._onLoad = _onLoad;
};

_mboxDefaultContentOffer.prototype.shouldAppendClickHandler = function(_mbox, _clickHandlerDiv, _defaultDiv) {
  var _result = _mbox.getFetcher && _mbox.getFetcher().getType() === 'ajax';
  _result = _result && _mbox.getDiv() === _mbox.getDefaultDiv();
  _result = _result && _clickHandlerDiv !== null;
  _result = _result && _clickHandlerDiv !== _defaultDiv;

  return  _result;
};

_mboxDefaultContentOffer.prototype.appendClickHandlerIfRequired = function(_mbox, _clickHandlerDiv, _defaultDiv) {
  if (this.shouldAppendClickHandler(_mbox, _clickHandlerDiv, _defaultDiv)) {
    _defaultDiv.appendChild(_clickHandlerDiv);
  }
};

_mboxDefaultContentOffer.prototype.onClickHandler = function(_mbox) {
  // just use _mbox.getName() when everyone is on mboxVersion >= 21
  var _mboxName = _mbox.getName ? _mbox.getName() : _mbox.id;
  var _clickDiv = document.getElementById('mboxClick-' + _mboxName);

  if (_clickDiv !== null) {
    _clickDiv.onclick();
  }
};

_mboxDefaultContentOffer.prototype.show = function(_mbox) {
  try {
    var _self = this;
    var _defaultDiv = _mbox.getDefaultDiv();

    if (_defaultDiv === null) {
      return 0;
    }

    _defaultDiv.onclick = function () {
      _self.onClickHandler(_mbox);
    };

    var _clickHandlerDiv = _mbox.getDiv();
    var _result = _mbox.hide();

    if (_result === 1) {
      this.appendClickHandlerIfRequired(_mbox, _clickHandlerDiv, _defaultDiv);
      this._onLoad();
    }

    return _result;
  } catch (e) {
    var _errorMessage = "Default content offer caused exception: " + e;

    if (_mbox.setMessage) {
      _mbox.setMessage(_errorMessage);
    } else {
      _mbox.setError(_errorMessage);
    }

    return 0;
  }
};

(function(){
  var shouldShowMbox = mboxCurrent.getFetcher && mboxCurrent.getFetcher().getType() === 'ajax';

  mboxCurrent.setOffer(new _mboxDefaultContentOffer());

  if (shouldShowMbox) {
    mboxCurrent.show();
  }
}());


window.s_tnt=window.s_tnt||'';
if (location.host.indexOf("barclays.co.uk")>-1 && typeof $ == "function" && typeof mboxCurrent!="undefined" && $(mboxCurrent.getDiv()).find("[data-ttmeta-crid]:eq(0)").length>0){
	var notProductsForYou = (n = mboxCurrent.getName().split("_"), n = n.length>0 ? n[0] : "", n != "ProductPromo4");   var tntVal = $(mboxCurrent.getDiv()).find("[data-ttmeta-crid]:eq(0)").attr('data-ttmeta-crid');     if (notProductsForYou) var ttPromptId = $(mboxCurrent.getDiv()).find("[data-ttmeta-crid]:eq(0)").attr('data-ttmeta-promptid');
	var ttOfferTrackMetaArr = tntVal.split(':');
	if (ttOfferTrackMetaArr.length==3 && ttOfferTrackMetaArr[1].indexOf('_')>-1){
		var ttOfferTrackMetaInstance = ttOfferTrackMetaArr[2];
		if (ttOfferTrackMetaInstance.indexOf("SummaryAccountPromo")>-1) ttOfferTrackMetaInstance = ttOfferTrackMetaInstance.substr(19,1)
		ttOfferTrackMetaInstance = parseInt(ttOfferTrackMetaInstance);
		if (ttOfferTrackMetaArr[2]=="" || ttOfferTrackMetaArr[2]<=0) {
			ttOfferTrackMetaInstance=1; //when no instance, assume Instance 1, so the rest of the code can be reused
		}
		var ttOfferTrackMetaProfile = ttOfferTrackMetaArr[1];
		var ttOfferTrackMetaProfile_instStart = ttOfferTrackMetaProfile.indexOf('_'+ttOfferTrackMetaInstance+'_'); //find where this instance products starts
		if(ttOfferTrackMetaProfile_instStart>=0){
			var ttOfferTrackMetaProfile_ProdFromInstStart = ttOfferTrackMetaProfile.substring(ttOfferTrackMetaProfile_instStart+3); //+3 is for "_", "Instance", "_"
			var ttOfferTrackMetaProfile_ProdNextUnderscore = ttOfferTrackMetaProfile_ProdFromInstStart.indexOf('_');
			var ttOfferTrackMetaProf;
			if (ttOfferTrackMetaProfile_ProdNextUnderscore==-1){ //no next underscore, get value till end of string
				ttOfferTrackMetaProf = ttOfferTrackMetaProfile_ProdFromInstStart; //Return profile match
			}else{
				ttOfferTrackMetaProf = ttOfferTrackMetaProfile_ProdFromInstStart.substring(0,ttOfferTrackMetaProfile_ProdNextUnderscore); //Return profile match until next underscore
			}
			tntVal = ttOfferTrackMetaArr[0]+":"+ttOfferTrackMetaProf;
		}else{
			tntVal = ttOfferTrackMetaArr[0]+"::"+ttOfferTrackMetaInstance; //missing/empty profile value, default?
		}
	}
	//if last char is ':' take it out
	if (tntVal.lastIndexOf(':')==tntVal.length-1){
		tntVal = tntVal.substring(0,tntVal.length-1);
	}
    if (notProductsForYou && typeof ttPromptId != "undefined" && ttPromptId != "" && ttPromptId != null) tntVal=tntVal+"," + ttPromptId; tntVal+=",";
}else{
	tntVal='171624:0:0,';
}

if(window.s_tnt.indexOf(tntVal)==-1){window.s_tnt+=tntVal}
if (location.host.indexOf("barclays.co.uk")>-1 && window.s && window.s.tl)
{
	var c = s.c_r("mbox")
	var i = c.indexOf("PC#")
	var j = c.indexOf("#",i+3); s.list1 = window.s_tnt;
	s.eVar74 = c.substring(i+3,j)
	if (typeof s.events==="undefined" || s.events=="") s.events="event6"
	else if(s.events.indexOf("event6,")==-1 && s.events.indexOf("event6")!=s.events.length-6) s.events+=",event6"
	if (mboxCurrent.getFetcher().getType() == 'ajax')
	{
		if (!window.tntSendToSc)
		{
			window.tntSendToSc = function ()
			{
				var ltv = s.linkTrackVars
				var lte = s.linkTrackEvents
				s.linkTrackVars = 'eVar74,list1'
				s.linkTrackEvents = 'event6'
				s.tl(true, 'o', 'TnT Integration')
				s.linkTrackVars = ltv
				s.linkTrackEvents = lte
				window.tntSendToSc = false
			}
			setTimeout ("window.tntSendToSc()", 400);
		}
	}
}
/*T&T Metadata v3 ==>Response Plugin*/
window.ttMETA=(typeof(window.ttMETA)!="undefined")?window.ttMETA:[];window.ttMETA.push({"CampaignName":"RAG_Testing_PersonalHomePage_ExistingCustomers","CampaignId":"171624","RecipeName":"Experience A","RecipeId":"0","OfferId":"148","OfferName":"Default Content","MboxName":"Global_Mbox"});

/*T&T Metadata v3 ==>Response Plugin*/
window.ttMETA=(typeof(window.ttMETA)!="undefined")?window.ttMETA:[];window.ttMETA.push({"CampaignName":"RAG_Testing_PersonalHomePage_ExistingCustomers","CampaignId":"171624","RecipeName":"Experience A","RecipeId":"0","OfferId":"148","OfferName":"Default Content","MboxName":"Global_Mbox"});

	var a = document.querySelector("meta[name='WT.dcsvid']")
	if (a)
	{
		var b=a.getAttribute("content")
		if (b)
		{
			if (!window.tntGotMembershipId)
			{
				mboxDefine("GetMembershipId","GetMembershipId")
				mboxUpdate("GetMembershipId", "membershipid="+b)
				window.tntGotMembershipId = true
			}
		}
	}
});mboxCurrent.loaded();mboxFactories.get('default').getPCId().forceId("5ebaf8b7aafd42b888bf8d5ebef2557c.21_51");_AT.applyWhenReady([{"action":"trackClick","selector":"#main-content > SECTION:nth-of-type(1) > DIV.jumbo:eq(0) > DIV.jumbo-body:eq(0) > DIV.container-fluid:eq(0) > DIV.row:eq(0) > DIV.col-md-10:eq(0) > DIV:nth-of-type(1) > DIV.row:eq(0) > DIV.col-xs-10:eq(1) > DIV.jumbo-content:eq(0) > UL.btn-holder:eq(0) > LI:nth-of-type(1) > A.btn:eq(0)","clickTrackId":"32767.171624"}]);